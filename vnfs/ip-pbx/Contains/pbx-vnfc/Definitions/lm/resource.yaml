description: descriptor for pbx-vnfc
infrastructure:
  Kubernetes:
    template:
      file: k8s.yaml
  Openstack:
    template:
      template-type: HEAT
      file: heat.yaml
metrics:
  h_integrity:
    type: metric::integrity
    publication-period: '10'
policies:
  heal:
    metric: "h_integrity"
    type: "policy::heal"
    properties:
      smoothing:
        value: ${integrity_smoothing}
properties:
  instance_name:
    description: the name of this resource instance
    value: ${instance.name}
  key_name:
    description: Openstack key
    required: true
  image_id:
    description: the image name
    default: ippbx
  flavor:
    description: Type of instance (flavor) to be used
    default: m1.small

  mgmt_network_id:
    description: mgmt network id
  mgmt_secgroup_id:
    description: mgmt secgroup id
  voice_network_id:
    description: voice network id
  voice_secgroup_id:
    description: voice secgroup id

  voice_ip_address:
    description: assigned ip address on voip network. This is the voip endpoint
    read-only: true

  mgmt_ip_address:
    read-only: true

  voice_cidr:
    required: true
  gw_address:
    description: if a gw is in front then pass in its private or internal ip address

  # properties for metrics and policies
  instanceid:
    description: this is here to get metric key, which is curretly the same as instance
      id. This will be removed soon.
    value: ${instance.id}
  integrity_smoothing:
    description: Integrity smoothing
    default: 3
  publication_period:
    description: Metric publication period in seconds
    default: 60

  # jumphost properties
  jumphost_ip:
    description: ip assigned to jumphost
  jumphost_username:
    description: jumphost username
  jumphost_password:
    description: jumphost password

lifecycle:
  Delete: {}
  Install: {}
  Create: {}
  Stop: {}
  Integrity: {}
  Start: {}
  Configure: {}
default-driver:
  ansible:
    infrastructure-type:
    - '*'
